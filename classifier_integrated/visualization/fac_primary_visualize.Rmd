---
title: "R Notebook"
output: html_notebook
---

```{r}
library(tidyverse)
library(sf)

amwo_data_reconstructed <- readRDS(here::here("classifier_integrated", "fac_primary_state_delineation.rds"))
```

Inspect individual tracks to assess validity
```{r}
relevant_id <- "VA-2022-100"

view_points <- amwo_data_reconstructed %>%
  filter(animal_name == relevant_id) %>% 
  dplyr::select(animal_name, time, long, lat, primary_step_state, primary_point_state, event_id) %>%
  sf::st_as_sf(coords = c("long", "lat"), crs = 4326, remove = FALSE) %>%
  arrange(animal_name, time)

view_lines <- view_points %>%
  group_by(animal_name) %>%
  summarise(do_union = F) %>%
  st_cast(to = "LINESTRING")

mapview::mapview(view_points, zcol = "primary_step_state") + mapview::mapview(view_lines)
```


```{r}
View(view_points, title = relevant_id)
```

